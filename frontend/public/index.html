<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Survive Voxel Prototype — Hide To Survive</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="/favicon.svg" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body class="holiday">
  <header class="hts-header">
    <a class="hts-logo-wrap" href="/" aria-label="Survive.com">
      <!-- Inline SVG fallback -->
      <svg width="180" height="48" viewBox="0 0 400 80" xmlns="http://www.w3.org/2000/svg" role="img">
        <rect width="100%" height="100%" rx="10" fill="#061E33" />
        <text x="22" y="50" font-family="Inter, Arial, sans-serif" font-weight="700" font-size="34" fill="#00E6FF">SURVIVE</text>
      </svg>
      <img id="siteLogo" src="/logo.png" alt="Survive.com logo" class="hts-logo-img" style="height:48px; display:none;" onload="this.style.display='block'" onerror="this.style.display='none'"/>
    </a>
  </header>

  <nav class="main-nav">
    <button id="navLogin" class="nav-btn">Login</button>
    <button id="navHow" class="nav-btn">How To Play</button>
    <button id="navPlay" class="nav-btn">Play</button>
  </nav>

  <section id="pageLogin" class="page active">
    <main class="menu-card">
      <h1 class="menu-title">HIDE TO SURVIVE</h1>
      <p class="menu-subtitle">Fast-paced voxel hide-and-seek prototype.</p>

      <div class="menu-form">
        <label for="playerName">Name</label>
        <input id="playerName" type="text" placeholder="Player" maxlength="30" />

        <label for="roomId">Room (optional)</label>
        <div style="display:flex; gap:8px; align-items:center;">
          <input id="roomId" type="text" placeholder="default" style="flex:1;" />
          <button id="createRoomBtn" class="btn-secondary">Create Room</button>
        </div>

        <div id="inviteArea" class="invite-area hidden">
          <span id="inviteText"></span>
          <button id="copyInviteBtn" class="btn-primary small">Copy</button>
        </div>

        <label for="botCount">Bot Count</label>
        <input id="botCount" type="number" min="0" max="16" value="4" />

        <button id="joinBtn" class="btn-primary" style="margin-top:12px;">JOIN MATCH</button>
        <div style="margin-top:8px;color:#9ca3af;font-size:13px;">Hint: Click the canvas to lock pointer. Use WASD + mouse. Q to place block, R to remove, E to pick up shield.</div>
      </div>
    </main>
  </section>

  <section id="pageHow" class="page">
    <main class="menu-card">
      <h2>HOW TO PLAY</h2>
      <p>Hiders pick up shields to block darts. If a hider reaches the seeker and holds proximity they capture the seeker and take the gun.</p>
    </main>
  </section>

  <section id="pagePlay" class="page">
    <canvas id="gameCanvas"></canvas>

    <div id="hud" class="hud hidden">
      <div id="playerDisplayName"></div>
      <div id="roleLabel"></div>
      <div id="playersLabel"></div>
      <div id="connectionStatus">Not connected</div>
      <div id="shieldStatus"></div>
    </div>

    <div id="tranqOverlay" class="tranq-overlay hidden"><div class="tranq-overlay-inner"><h2>TRANQUILIZED!</h2></div></div>

    <button id="shootBtn" class="shoot-btn">SHOOT</button>
    <aside id="leaderboard" class="leaderboard"><h3>Leaderboard</h3><ul id="leaderboardList"></ul></aside>
  </section>

  <footer class="site-footer">
    <div class="footer-inner">
      <span>© Survive.com 2025</span>
      <span class="footer-support"><a id="supportLink" href="#" class="support-link">Support</a></span>
    </div>
  </footer>

  <script src="/env.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r127/three.min.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="/initThree.js"></script>
  <script src="/initVoxel.js"></script>
  <script src="/game.js"></script>

  <script>
    (function () {
      function $(id){ return document.getElementById(id); }
      function showPage(id) { document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); const el = document.getElementById(id); if (el) el.classList.add('active'); }
      document.getElementById('navHow').addEventListener('click', (e)=>{ e.preventDefault(); showPage('pageHow'); });
      document.getElementById('navLogin').addEventListener('click', (e)=>{ e.preventDefault(); showPage('pageLogin'); });
      document.getElementById('navPlay').addEventListener('click', (e)=>{ e.preventDefault(); showPage('pagePlay'); });
    })();
  </script>
</body>
</html>
