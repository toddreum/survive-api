<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hide To Survive — Multiplayer Hide & Seek</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="/favicon.svg" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="hts-header" role="banner">
    <a class="logo-link" href="/" aria-label="Home">
      <img id="siteLogo" src="/logo.png" alt="Survive.com logo" onerror="this.onerror=null;this.src='/logo.svg'"/>
    </a>

    <nav class="top-actions" aria-label="Top actions">
      <button id="navLogin" class="nav-btn">Login</button>
      <button id="navHow" class="nav-btn">How To Play</button>
      <button id="navPlay" class="nav-btn">Play</button>
    </nav>
  </header>

  <main class="main-content" role="main">
    <section id="pageLogin" class="page active" aria-labelledby="loginTitle">
      <main class="menu-card" role="region" aria-label="Join menu">
        <h1 id="loginTitle" class="menu-title">HIDE TO SURVIVE</h1>
        <p class="menu-subtitle">Fast-paced voxel hide-and-seek — multiplayer matches with shields, captures, and tactical play.</p>

        <div class="menu-form">
          <label for="playerName">Name</label>
          <input id="playerName" type="text" placeholder="Player#1234" maxlength="30" />

          <label for="roomId">Room (optional)</label>
          <div class="row">
            <input id="roomId" type="text" placeholder="default" />
            <button id="createRoomBtn" class="btn-secondary">Create Room</button>
          </div>

          <div id="inviteArea" class="invite-area hidden">
            <span id="inviteText" class="invite-text"></span>
          </div>

          <label for="botCount">Bot Count</label>
          <input id="botCount" type="number" min="0" max="32" value="4" />

          <div style="margin-top:12px">
            <button id="joinBtn" class="btn-primary">JOIN MATCH</button>
          </div>

          <p class="hint">Hint: Click the canvas overlay to lock pointer. Use WASD + mouse. Q to place block, R to remove, E to pick up shield.</p>
        </div>
      </main>
    </section>

    <section id="pageHow" class="page" aria-labelledby="howTitle">
      <main class="menu-card">
        <h2 id="howTitle">HOW TO PLAY</h2>
        <div class="menu-howto">
          <ol>
            <li><strong>Objective</strong>: Survive as a Hider or hunt as the Seeker.</li>
            <li><strong>Roles</strong>: Hider and Seeker — Hiders pick up shields, Seekers have darts.</li>
            <li><strong>Capture</strong>: Hider holds close to Seeker to capture (hold-time). Roles swap on capture.</li>
            <li><strong>Shields</strong>: Block limited hits (durability & duration).</li>
            <li><strong>Controls</strong>: WASD + mouse, click canvas to lock pointer, Q place, R remove, E pickup, SHOOT button to fire.</li>
          </ol>
        </div>
      </main>
    </section>

    <section id="pagePlay" class="page" aria-label="Play area">
      <div id="playOverlay" class="click-to-play">Click here to play (locks pointer)</div>
      <canvas id="gameCanvas" aria-hidden="true"></canvas>

      <div id="hud" class="hud hidden" role="complementary">
        <div id="playerDisplayName" class="hud-role"></div>
        <div id="roleLabel" class="hud-role"></div>
        <div id="playersLabel"></div>
        <div id="connectionStatus" class="connection"></div>
        <div id="shieldStatus" class="shield"></div>
        <div style="margin-top:10px">
          <button id="leaveBtn" class="btn-secondary">Leave Match</button>
        </div>
      </div>

      <aside id="leaderboard" class="leaderboard hidden" aria-label="Leaderboard"><h3>Leaderboard</h3><ul id="leaderboardList"></ul></aside>

      <div id="tranqOverlay" class="tranq-overlay hidden"><div class="tranq-overlay-inner"><h2>TRANQUILIZED!</h2><p>You'll recover shortly.</p></div></div>

      <button id="shootBtn" class="shoot-btn">SHOOT</button>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="footer-inner">
      <div class="footer-left">
        <span class="copyright-symbol">©</span>
        <span class="copyright-year">2025</span>
      </div>

      <div class="footer-right">
        <a id="supportLink" class="support-link" href="#">Support</a>
        <span class="footer-sep">—</span>
        <a class="brand" href="/" rel="noopener">Survive.com</a>
      </div>
    </div>
  </footer>

  <!-- scripts -->
  <script src="/env.js"></script>
  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="/initThree.js"></script>
  <script src="/initVoxel.js"></script>
  <script src="/game.js"></script>

  <script>
    (function () {
      function $(id){ return document.getElementById(id); }
      function showPage(id) { document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); const el = document.getElementById(id); if (el) el.classList.add('active'); }
      document.getElementById('navHow').addEventListener('click', (e)=>{ e.preventDefault(); showPage('pageHow'); });
      document.getElementById('navLogin').addEventListener('click', (e)=>{ e.preventDefault(); showPage('pageLogin'); });
      document.getElementById('navPlay').addEventListener('click', (e)=>{ e.preventDefault(); if (window.myId || (window.hts && window.hts.socketConnected)) showPage('pagePlay'); else { alert('Please JOIN MATCH first'); showPage('pageLogin'); } });
    })();
  </script>
</body>
</html>
